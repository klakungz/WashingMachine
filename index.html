<!DOCTYPE html>
<html lang="en">

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>Ottara</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <!-- bootstrap css -->
   <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
   <!-- style css -->
   <link rel="stylesheet" type="text/css" href="css/style.css">
   <link rel="stylesheet" type="text/css" href="css/alert.css">
   <!-- Responsive-->
   <link rel="stylesheet" href="css/responsive.css">
   <!-- fevicon -->
   <link rel="icon" href="images/fevicon.png" type="image/gif" />
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
   <!-- Tweaks for older IEs-->
   <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
   <!-- fonts -->
   <link href="https://fonts.googleapis.com/css?family=Poppins:400,700|Righteous&display=swap" rel="stylesheet">
   <!-- owl stylesheets -->
   <link rel="stylesheet" href="css/owl.carousel.min.css">
   <link rel="stylesheet" href="css/owl.theme.default.min.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
      media="screen">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  
  
</head>




<body onload="startTime()">
   <!-- header section start -->
   <div class="header_section">
      <div class="header_main">
       
         <div class="container-fluid">
         
            <div class="menu_main">
              <p  class="services_taital" style="color: white;" >Ottara</p>
            </div>
         </div>
      </div>
   </div>
   <!-- header section end -->
   <!-- services section start -->
   <div class="services_section layout_padding">
      <div class="container">
         <div class="timecss" id="txttime"></div>
         <p class="services_text">ร้านสะดวกซัก อันดับ 2 ของไทย
            Ottara wash & dry เปิดให้บริการมากกว่า 100 สาขาค้นหาร้านซักผ้าอ็อตเทริใกล้คุณได้ที่แอปฯ Ottara
            ร้านสะดวกซักอันดับ 2 ของไทย ด้วยจำนวนสาขามากที่สุดและสมาชิกผู้ใช้งานมากที่สุดที่พิสูจน์แล้วว่ามาตราฐานความสะดวกสบายและความสะอาดของระบบซักผ้าเป็นที่พึงพอใจ เทคโนโลยีซักผ้าทันสมัยครบครัน เครื่องซักผ้าและอบผ้าอุตสาหกรรมมาตราฐานสากล เปิดบริการตลอด 24 ชั่วโมง</p>
         <div class="services_section_2">
            <div class="row">
               <div class="col-md-4">
                  <div><img src="images/washingmachine.png" class="services_img"></div>
                  
                  <div class="card">
                     <div class="services_img">
                       <h4><b>เครื่่อง 1</b></h4> 
                        <div class="display_center"class="display_center"><h3>สถานะเครื่อง : &nbsp; </h3> <h3 style="color: green;" id ="status1"> ว่าง</h3></div>
                        <div class="display_center"class="display_center"><h3>จำนวนเงิน : &nbsp; </h3> <h3 id ="machine1" > 0</h3> <h3 > /30</h3></div>              
                        <h3>น้ำหนัก : 10 Kg</h3>
                        <div style="margin-bottom: 5px;">เวลาในการใช้งาน <span id="time1">00:00</span> นาที</div>
                        <input class="btn btn-primary btn-lg active" type="button" value="หยอดเหรียญ10" id="btn1" onclick="btnclick()">
                     </div>
                   </div>
               </div>
               <div class="col-md-4">
                  <div><img src="images/washingmachine.png" class="services_img"></div>
                  <div class="card">
                     <div class="services_img">
                       <h4><b>เครื่่อง 2</b></h4> 
                       <div class="display_center"><h3>สถานะเครื่อง : &nbsp; </h3> <h3 style="color: green;" id ="status2"> ว่าง</h3></div>
                       <div class="display_center"class="display_center"><h3>จำนวนเงิน : &nbsp; </h3> <h3 id ="machine2"> 0</h3> <h3 > /30</h3></div> 
                       <h3>น้ำหนัก : 10 Kg</h3>
                       <div style="margin-bottom: 5px;">เวลาในการใช้งาน <span id="time2">00:00</span> นาที</div>
                       <input class="btn btn-primary btn-lg active" type="button" value="หยอดเหรียญ10" id="btn2" onclick="btnclick2()">
                     </div>
                   </div>
               </div>
               <div class="col-md-4">
                  <div><img src="images/washingmachine.png" class="services_img"></div>
                  <div class="card">
                     <div class="services_img">
                       <h4><b>เครื่่อง 3</b></h4> 
                       <div class="display_center"><h3>สถานะเครื่อง : &nbsp; </h3> <h3 style="color: green;" id ="status3"> ว่าง</h3></div>
                       <div class="display_center"class="display_center"><h3>จำนวนเงิน : &nbsp; </h3> <h3 id ="machine3"> 0</h3> <h3 > /30</h3></div> 
                       <h3>น้ำหนัก : 10 Kg</h3>
                       <div style="margin-bottom: 5px;">เวลาในการใช้งาน <span id="time3">00:00</span> นาที</div>
                       <input class="btn btn-primary btn-lg active" type="button" value="หยอดเหรียญ10" id="btn3" onclick="btnclick3()">
                     </div>
                   </div>
               </div>
               <div class="notifications"></div>
            </div>
         </div>
      </div>
   </div>

   <div class="copyright_section">
      <div class="container">
         <p class="copyright_text"></p>
      </div>
   </div>
   <!-- copyright section end -->
   <!-- Javascript files-->
   <script src="js/jquery.min.js"></script>
   <script src="js/popper.min.js"></script>
   <script src="js/bootstrap.bundle.min.js"></script>
   <script src="js/jquery-3.0.0.min.js"></script>
   <script src="js/plugin.js"></script>
   <!-- sidebar -->
   <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
   <script src="js/custom.js"></script>
   <!-- javascript -->
   <script src="js/owl.carousel.js"></script>
   <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
</body>
<script src="index.js"></script>
<script>
   let status1 =  document.getElementById("status1")
   let status2 =  document.getElementById("status2")
   let status3 =  document.getElementById("status3")

   let machine1 =  document.getElementById("machine1")
   let machine2 =  document.getElementById("machine2")
   let machine3 =  document.getElementById("machine3")
   let notifications = document.querySelector('.notifications');
   
    function createToast(type, icon, title, text){
        let newToast = document.createElement('div');
        newToast.innerHTML = `
            <div class="toast ${type}">
                <i class="${icon}"></i>
                <div class="content">
                    <div class="title">${title}</div>
                    <span>${text}</span>
                </div>
                <i class="fa-solid fa-xmark" onclick="(this.parentElement).remove()"></i>
            </div>`;
        notifications.appendChild(newToast);
        newToast.timeOut = setTimeout(
            ()=>newToast.remove(), 5000
        )
    }
 

   function btnclick(){
      let type = 'success';
      let icon = 'fa-solid fa-circle-check';
      let title = 'เครื่องที่1';
      let text = 'กำลังเริ่มการใช้งาน';
      var fiveMinutes = 10 ;

      if(machine1.innerText === "0"){
         machine1.innerHTML = "10"
      }else if(machine1.innerText === "10"){
         machine1.innerHTML = "20"
      }else if(machine1.innerText === "20")[
      machine1.innerHTML = "30"
      ]
   
      if(machine1.innerText === "30")[
         createToast(type, icon, title, text),
         display = document.querySelector('#time1'),
         startTimer1(fiveMinutes, display),
         status1.innerHTML = "กำลังใช้งาน",
         status1.style.color = "red",
         document.getElementById("btn1").disabled = true,
      ]
   }

   function btnclick2(){
      let type = 'success';
      let icon = 'fa-solid fa-circle-check';
      let title = 'เครื่องที่2';
      let text = 'กำลังเริ่มการใช้งาน';
      var fiveMinutes = 60*54 ;
      


      if(machine2.innerText === "0"){
         machine2.innerHTML = "10"
      }else if(machine2.innerText === "10"){
         machine2.innerHTML = "20"
      }else if(machine2.innerText === "20")[
      machine2.innerHTML = "30"
      ]

      if(machine2.innerText === "30")[
         createToast(type, icon, title, text),
         display = document.querySelector('#time2'),
         startTimer2(fiveMinutes, display),
         status2.innerHTML = "กำลังใช้งาน",
         status2.style.color = "red",
         document.getElementById("btn2").disabled = true
      ]
      
      
   }
   function btnclick3(){
      let type = 'success';
      let icon = 'fa-solid fa-circle-check';
      let title = 'เครื่องที่3';
      let text = 'กำลังเริ่มการใช้งาน';
      var fiveMinutes = 60*47 ;
      if(machine3.innerText === "0"){
         machine3.innerHTML = "10"
      }else if(machine3.innerText === "10"){
         machine3.innerHTML = "20"
      }else if(machine3.innerText === "20")[
      machine3.innerHTML = "30"
      ]

      if(machine3.innerText === "30")[
         createToast(type, icon, title, text),
         display = document.querySelector('#time3'),
         startTimer3(fiveMinutes, display),
         status3.innerHTML = "กำลังใช้งาน",
         status3.style.color = "red",
         document.getElementById("btn3").disabled = true
      ]
      
   }

    //countdown 
    function startTimer1(duration, display) {
    var timer = duration, minutes, seconds;
    var refreshIntervalId = setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        let type = 'success';
      let icon = 'fa-solid fa-circle-check';
      let title = 'เครื่องที่1';
      let text = 'ทำงานเสร็จสิ้น';
        if (--timer < 0) {
         createToast(type, icon, title, text),
            timer = duration;
            status1.innerHTML = "ว่าง",
            status1.style.color = "green",
            machine1.innerText = "0",
            document.getElementById("btn1").disabled = false
            clearInterval(refreshIntervalId);

        }
        
    }, 1000);
   }

   function startTimer2(duration, display) {
    var timer = duration, minutes, seconds;
    var refreshIntervalId = setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

      let type = 'success';
      let icon = 'fa-solid fa-circle-check';
      let title = 'เครื่องที่2';
      let text = 'ทำงานเสร็จสิ้น';

        if (--timer < 0) {

          createToast(type, icon, title, text),
            timer = duration;
            status2.innerHTML = "ว่าง",
            status2.style.color = "green",
            machine2.innerText = "0",
            document.getElementById("btn2").disabled = false
            clearInterval(refreshIntervalId);
        }
        
    }, 1000);
   }

   function startTimer3(duration, display) {
    var timer = duration, minutes, seconds;
    var refreshIntervalId = setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        let type = 'success';
      let icon = 'fa-solid fa-circle-check';
      let title = 'เครื่องที่3';
      let text = 'ทำงานเสร็จสิ้น';
        if (--timer < 0) {
         createToast(type, icon, title, text),
            timer = duration;
            status3.innerHTML = "ว่าง",
            status3.style.color = "green",
            machine3.innerText = "0",
            document.getElementById("btn3").disabled = false
            clearInterval(refreshIntervalId);
        }
        
    }, 1000);
   }
   
   //Time 
   function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('txttime').innerHTML =
        h + ":" + m + ":" + s;
        var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
    }function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('txttime').innerHTML =
        h + ":" + m + ":" + s;
        var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
    }

//token  JgOkrQxjiorET37vyfMnvBh5aoVg1jPuACNYPK5ECC4


    function notifyline(){
      const request = require('request');
      const dotenv = require('dotenv');
      dotenv.config();

      const url_line_notification = "https://notify-api.line.me/api/notify";

      request({
         method: 'POST',
         uri: url_line_notification,
         header: {
            'Content-Type': 'multipart/form-data',
         },
         auth: {
            bearer: process.env.TOKEN,
         },
         form: {
            message: 'Test Message!'
         },
      }, (err, httpResponse, body) => {
         if (err) {
            console.log(err)
         } else {
            console.log(body)
         }
      });
    }
</script>

</html>